<!DOCTYPE html>
<html lang="en" xmlns:th="https://thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <title>Registration</title>
  <script src="header-footer.js"></script>
</head>

<body>
  <my-header></my-header>
  <h2 class="text-center mt-3">Please fill the correct details</h2>
  <div class="container w-25">
    <form id="addAccountHolder" method="post">
      <div class="form-row">
        <div class="form-group">
          <label for="inputFirstName">First Name</label>
          <input type="text" name="firstName" class="form-control" id="inputFirstName" placeholder="First Name"
            required>
        </div>
        <div class="form-group ">
          <label for="inputLastName">Last Name</label>
          <input type="text" name="lastName" class="form-control" id="inputLastName" placeholder="Last Name" required>
        </div>
      </div>
      <div class=" form-group">
        <label for="inputEmail">Email</label>
        <input type="email" name="email" class="form-control" id="inputEmail" placeholder="Email" required>
      </div>
      <div class=" form-group>
          <label for=" inputPassword">Password</label>
        <input type="password" name="password" class="form-control" id="inputPassword" required>
      </div>
      <div class=" form-group">
        <label for="inputDob">Date of Birth</label>
        <input type="date" data-date-format="dd mm yyyy" name="dob" class="form-control" id="inputDob"
          placeholder="Apartment, studio, or floor" required>
      </div>
      <div class=" form-group>
          <label for=" inputPhone">Phone Number</label>
        <input type="tel" name="phoneNumber" class="form-control" id="inputPhone" required>
      </div>
      <div class=" form-group">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="gridCheck">
          <label class="form-check-label" for="gridCheck">
            Stay logged in
          </label>
        </div>
      </div>
      <button type="submit" class="btn btn-primary">Submit</button>

    </form>
  </div>
  <my-footer></my-footer>


  <script>
    const form = document.getElementById('addAccountHolder');

    form.addEventListener('submit', e => {
      e.preventDefault();

      const payload = new FormData(form);
      const temp = Object.fromEntries(payload);

      //  console.log(payload.get('firstName'))
      //  console.log([...payload]);

      fetch('http://localhost:8080/addAccountHolder', {
        // mode:"no-cors",

        method: "post",
        headers: {
          // 'Accept': 'application.json',
          'content-type': 'application/json',
          // 'Access-Control-Allow-Origin': '*',
          // 'Access-Control-Allow-Methods': 'POST,PATCH,OPTIONS,GET'
        },
        body: JSON.stringify(temp)
        // {inputFirstName:firstName, inputLastName:lastName, inputEmail:email, inputPassword:password, inputDob:dob, inputPhoneNumber:phoneNumber}
      }).then((res) => res.json())
        .then((data) => console.log(data))
        .catch(err => (console.error()));


    })


  </script>
</body>

</html>